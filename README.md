# GUI Agent Memory System

ğŸ§  Enhanced Memory Module (RAG-based) for GUI Agent

## ğŸ“ æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªä¸ºGUIæ™ºèƒ½ä½“è®¾è®¡çš„å¢å¼ºè®°å¿†æ¨¡å—ï¼ŒåŸºäºæ£€ç´¢å¢å¼ºç”Ÿæˆ(RAG)æŠ€æœ¯ï¼Œæä¾›é•¿æœŸå­˜å‚¨ã€ç®¡ç†å’Œæ£€ç´¢åŠŸèƒ½ï¼š

- **æƒ…æ™¯è®°å¿†**ï¼šå¯é‡ç”¨çš„æ“ä½œæµç¨‹å’Œç»éªŒ
- **è¯­ä¹‰è®°å¿†**ï¼šå…³äºç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„å®¢è§‚äº‹å®å’Œè§„åˆ™

## ğŸš€ ç‰¹æ€§

- âœ… åŸºäºChromaDBçš„å‘é‡å­˜å‚¨
- âœ… æ”¯æŒä¸­æ–‡æ–‡æœ¬å¤„ç†(jiebaåˆ†è¯)
- âœ… å®Œæ•´çš„æµ‹è¯•è¦†ç›–
- âœ… ç±»å‹å®‰å…¨(mypy)
- âœ… ç°ä»£åŒ–ä»£ç è´¨é‡ç®¡ç†(ruff)

## ğŸ“¦ å®‰è£…

### å‰ç½®æ¡ä»¶
- Python >= 3.11
- uv åŒ…ç®¡ç†å™¨

### å®‰è£…æ­¥éª¤

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd gui-agent-memory

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–
uv venv
source .venv/bin/activate  # Linux/Mac
# æˆ– .venv\Scripts\activate  # Windows

# å®‰è£…é¡¹ç›®ä¾èµ–
uv sync
```

## ğŸ§ª æµ‹è¯•

è¿è¡Œæµ‹è¯•å¥—ä»¶ï¼š
```bash
uv run pytest
```

## ğŸ”§ é…ç½®

1. å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼š
```bash
cp .env.example .env
```

2. ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œé…ç½®å¿…è¦çš„APIå¯†é’¥ï¼š

## ğŸƒâ€â™‚ï¸ å¿«é€Ÿå¼€å§‹

```python
from gui_agent_memory import MemorySystem

def main():
    # åˆå§‹åŒ–è®°å¿†ç³»ç»Ÿ
    memory = MemorySystem()

    # å­¦ä¹ ä¸€ä¸ªæˆåŠŸçš„ä»»åŠ¡ç»éªŒ
    # æ³¨æ„ï¼šå®é™…ä½¿ç”¨æ—¶ï¼Œä½ éœ€è¦æä¾›çœŸå®çš„APIå¯†é’¥åœ¨.envæ–‡ä»¶ä¸­
    try:
        task_history = {
            "goal": "æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨",
            "steps": [
                {"action": "key_press", "target": "cmd+space"},
                {"action": "type", "content": "finder"},
                {"action": "key_press", "target": "enter"}
            ],
            "outcome": "æˆåŠŸæ‰“å¼€Finderåº”ç”¨"
        }

        # ä½¿ç”¨ learn_from_task æ–¹æ³•å­˜å‚¨ç»éªŒ
        # åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å‡è®¾ä»»åŠ¡æ˜¯æˆåŠŸçš„ï¼Œå¹¶æä¾›ä¸€ä¸ªå”¯ä¸€çš„ä»»åŠ¡ID
        # æ³¨æ„ï¼šraw_history æœŸæœ›ä¸€ä¸ªåˆ—è¡¨ï¼Œæˆ‘ä»¬å°†ä»»åŠ¡å†å²å­—å…¸åŒ…è£…åœ¨åˆ—è¡¨ä¸­
        record_id = memory.learn_from_task(
            raw_history=[task_history],
            is_successful=True,
            source_task_id="task-12345"
        )
        print(f"æˆåŠŸå­¦ä¹ å¹¶å­˜å‚¨ç»éªŒï¼Œè®°å½•ID: {record_id}")

        # æ£€ç´¢ç›¸å…³ç»éªŒ
        results = memory.retrieve_memories("å¦‚ä½•æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨")
        print("æ£€ç´¢ç»“æœ:")
        print(results)

    except Exception as e:
        print(f"æ“ä½œå¤±è´¥: {e}")
        print("è¯·ç¡®ä¿æ‚¨çš„ .env æ–‡ä»¶ä¸­å·²é…ç½®äº†æœ‰æ•ˆçš„APIå¯†é’¥ã€‚")

if __name__ == "__main__":
    main()

```

## ğŸ”— åœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨

å¦‚æœè¦åœ¨å¦ä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨è¿™ä¸ªè®°å¿†åŒ…ï¼Œæ¨èä»¥ä¸‹æ–¹å¼ï¼š

### æ–¹æ³•1ï¼šæœ¬åœ°å¯ç¼–è¾‘å®‰è£…ï¼ˆæ¨èï¼‰

åœ¨æ‚¨çš„ä¸»é¡¹ç›®ç›®å½•ç»“æ„ä¸­ï¼š
```
your-main-project/
â”œâ”€â”€ agent.py
â”œâ”€â”€ ui_controller.py
â”œâ”€â”€ requirements.txt
â””â”€â”€ gui-agent-memory/  # <-- å°†æœ¬é¡¹ç›®ä½œä¸ºå­æ¨¡å—æˆ–ç›´æ¥æ‹·è´
```

åœ¨æ‚¨çš„ä¸»é¡¹ç›®ä¸­ï¼Œé€šè¿‡æœ¬åœ°è·¯å¾„è¿›è¡Œå¯ç¼–è¾‘å®‰è£…ï¼š
```bash
# ç¡®ä¿åœ¨æ‚¨çš„ä¸»é¡¹ç›®çš„è™šæ‹Ÿç¯å¢ƒä¸­
uv pip install -e ./gui-agent-memory
```

### æ–¹æ³•2ï¼šé€šè¿‡Gitä»“åº“å®‰è£…ï¼ˆæœªæµ‹è¯•ï¼‰

å¦‚æœæ‚¨çš„é¡¹ç›®å·²æ¨é€åˆ°Gitä»“åº“ï¼Œå¯ä»¥ç›´æ¥ä»URLå®‰è£…ï¼š
```bash
uv pip install git+https://github.com/your-username/gui-agent-memory.git
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
gui-agent-memory/
â”œâ”€â”€ gui_agent_memory/          # ä¸»è¦æºä»£ç 
â”‚   â”œâ”€â”€ __init__.py           # åŒ…åˆå§‹åŒ–
â”‚   â”œâ”€â”€ main.py              # ä¸»APIæ¥å£
â”‚   â”œâ”€â”€ models.py            # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ config.py            # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ storage.py           # å­˜å‚¨å±‚
â”‚   â”œâ”€â”€ retriever.py         # æ£€ç´¢å±‚
â”‚   â”œâ”€â”€ ingestion.py         # æ•°æ®æ‘„å–
â”‚   â””â”€â”€ prompts/             # æç¤ºè¯æ¨¡æ¿
â”œâ”€â”€ tests/                    # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ memory_system/           # æ•°æ®å­˜å‚¨ç›®å½•
â”œâ”€â”€ pyproject.toml          # é¡¹ç›®é…ç½®
â”œâ”€â”€ uv.lock                 # ä¾èµ–é”å®šæ–‡ä»¶
â””â”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
```

## ğŸ› ï¸ å¼€å‘

### ä»£ç è´¨é‡ç®¡ç†

#### ğŸ”§ å¼€å‘æ—¶å¿«é€Ÿæ ¼å¼åŒ–ï¼ˆä¸»åŠ¨ä¿®å¤ï¼‰
```bash
# æ ¼å¼åŒ–ä»£ç ï¼ˆç›´æ¥ä¿®æ”¹æ–‡ä»¶ï¼‰
uv run ruff format gui_agent_memory tests

# ä¿®å¤ä»£ç é—®é¢˜ï¼ˆå¯¼å…¥æ’åºã€ä»£ç é£æ ¼ç­‰ï¼‰
uv run ruff check --fix gui_agent_memory tests

# ç±»å‹æ£€æŸ¥ï¼ˆä»…æ£€æŸ¥ï¼Œä¸ä¿®æ”¹ï¼‰
uv run mypy gui_agent_memory tests
```

#### ğŸ›¡ï¸ æäº¤æ—¶è‡ªåŠ¨æ£€æŸ¥ï¼ˆæ¨èï¼‰
```bash
# ä¸€æ¬¡æ€§å®‰è£… pre-commit é’©å­ï¼ˆéœ€è¦ç½‘ç»œï¼‰
uv run pre-commit install

# æ‰‹åŠ¨è¿è¡Œæ‰€æœ‰æ£€æŸ¥ï¼ˆæµ‹è¯•é’©å­ï¼‰
uv run pre-commit run --all-files

# ä¹‹åæ¯æ¬¡ git commit éƒ½ä¼šè‡ªåŠ¨è¿è¡Œæ£€æŸ¥
```

**Pre-commit çš„ä¼˜åŠ¿ï¼š**
- âœ… è‡ªåŠ¨åœ¨æ¯æ¬¡æäº¤æ—¶è¿è¡Œæ£€æŸ¥
- âœ… åŒ…å«é¢å¤–çš„æ–‡ä»¶è´¨é‡æ£€æŸ¥ï¼ˆç©ºç™½å­—ç¬¦ã€å¤§æ–‡ä»¶ç­‰ï¼‰
- âœ… ç¡®ä¿å›¢é˜Ÿä»£ç æ ‡å‡†ç»Ÿä¸€
- âœ… åœ¨æäº¤å‰é˜»æ­¢é—®é¢˜ä»£ç 

#### ğŸ”„ ç¦»çº¿å¤‡ç”¨æ–¹æ¡ˆ
```bash
# ç½‘ç»œé—®é¢˜æ—¶ä½¿ç”¨æœ¬åœ°æ£€æŸ¥è„šæœ¬
./scripts/check.sh
```

**ä½¿ç”¨å»ºè®®ï¼š**
1. **æ—¥å¸¸å¼€å‘**ï¼šä½¿ç”¨ Ruff å¿«é€Ÿæ ¼å¼åŒ–å’Œä¿®å¤ä»£ç 
2. **æäº¤ä»£ç **ï¼šä¾èµ– pre-commit è‡ªåŠ¨æ£€æŸ¥ï¼ˆæ¨èï¼‰
3. **ç½‘ç»œå—é™**ï¼šä½¿ç”¨æœ¬åœ°æ£€æŸ¥è„šæœ¬éªŒè¯ä»£ç è´¨é‡

**å·¥å…·å‡çº§è¯´æ˜ï¼š**
- âœ… **Ruff**ï¼šæ›¿ä»£ Black + isort + flake8ï¼Œæ›´å¿«æ›´ç°ä»£
- âœ… **Mypy**ï¼šç»§ç»­ç”¨äºç±»å‹æ£€æŸ¥
- âœ… **ç»Ÿä¸€é…ç½®**ï¼šæ‰€æœ‰è®¾ç½®åœ¨ pyproject.toml ä¸­

## ğŸ“‹ API æ–‡æ¡£

### MemorySystem ç±»

- `retrieve_memories(query: str, top_n: int = 3)` - æ£€ç´¢ç›¸å…³çš„ç»éªŒå’Œäº‹å®
- `learn_from_task(raw_history: dict, is_successful: bool, source_task_id: str, ...)` - ä»åŸå§‹ä»»åŠ¡å†å²ä¸­å­¦ä¹ å¹¶å­˜å‚¨ä¸ºç»éªŒ
- `add_fact(fact: dict)` - å­˜å‚¨ä¸€ä¸ªç»“æ„åŒ–çš„äº‹å®è®°å½•

è¯¦ç»†APIæ–‡æ¡£è¯·å‚è€ƒä»£ç ä¸­çš„docstringã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜å’Œæ‹‰å–è¯·æ±‚ï¼

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä½¿ç”¨ [MIT License](LICENSE) æˆæƒã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [ChromaDB æ–‡æ¡£](https://docs.trychroma.com/)
- [Pydantic æ–‡æ¡£](https://docs.pydantic.dev/)
- [uv åŒ…ç®¡ç†å™¨](https://github.com/astral-sh/uv)

## ğŸ“ æ”¯æŒ

å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [Issues](../../issues) é¡µé¢
2. åˆ›å»ºæ–°çš„ Issue
3. è”ç³»ç»´æŠ¤å›¢é˜Ÿ

---

**GUI Agent Memory System** - è®©AIè®°å¿†æ›´æŒä¹…ï¼Œè®©äº¤äº’æ›´æ™ºèƒ½ ğŸš€
